+++
date = "2020-02-27"
title = "Великие дела с контейнерами: Запуск загрузчика Youtube на Synology Diskstation"
difficulty = "level-1"
tags = ["Docker", "docker-compose", "download", "linux", "Synology", "video", "youtube"]
githublink = "https://github.com/ChristianKnedel/knedelverse/blob/main/content/post/2020/february/20200227-docker-youtube-dl/index.ru.md"
+++
Многие из моих друзей знают, что я веду частный обучающий видеопортал в Homelab - Network. Я сохранил на NAS видеокурсы из прошлых членств на учебных порталах и хорошие учебники Youtube для автономного использования.
{{< gallery match="images/1/*.png" >}}
Со временем я собрал 8845 видеокурсов с 282616 отдельными видеороликами. Общее время работы составляет около 2 лет. Абсолютное безумие! В этом руководстве я показываю, как создать резервную копию хороших уроков Youtube с помощью службы загрузки Docker для автономных целей.
## Вариант для профессионалов
Как опытный пользователь Synology, вы, конечно, можете войти в систему с помощью SSH и установить всю установку через файл Docker Compose.
```
version: "2"
services:
  youtube-dl:
    image: modenaf360/youtube-dl-nas
    container_name: youtube-dl
    environment:
      - MY_ID=admin
      - MY_PW=admin
    volumes:
      - ./YouTube:/downfolder
    ports:
      - 8080:8080
    restart: unless-stopped

```

## Шаг 1
Сначала я создаю папку для загрузок. Я перехожу в "Управление системой" -> "Общая папка" и создаю новую папку под названием "Загрузки".
{{< gallery match="images/2/*.png" >}}

## Шаг 2: Поиск образа Docker
Я перехожу на вкладку "Регистрация" в окне Synology Docker и ищу "youtube-dl-nas". Я выбираю образ Docker "modenaf360/youtube-dl-nas" и затем нажимаю на тег "latest".
{{< gallery match="images/3/*.png" >}}
После загрузки изображения оно доступно в виде рисунка. Docker различает 2 состояния, контейнер "динамическое состояние" и образ/изображение (фиксированное состояние). Прежде чем мы сможем создать контейнер из образа, необходимо выполнить несколько настроек.
## Шаг 3: Введите изображение в работу:
Я дважды щелкаю по своему изображению на youtube-dl-nas.
{{< gallery match="images/4/*.png" >}}
Затем я нажимаю на "Дополнительные настройки" и активирую "Автоматический перезапуск". Я выбираю вкладку "Том" и нажимаю "Добавить папку". Там я создаю новую папку базы данных с таким путем монтирования "/downfolder".
{{< gallery match="images/5/*.png" >}}
Я назначаю фиксированные порты для контейнера "Youtube Downloader". Без фиксированных портов может оказаться, что "Youtube Downloader" запускается на другом порту после перезапуска.
{{< gallery match="images/6/*.png" >}}
Наконец, я ввожу две переменные окружения. Переменная "MY_ID" - это мое имя пользователя, а "MY_PW" - мой пароль.
{{< gallery match="images/7/*.png" >}}
После этих настроек Downloader можно запускать! После этого вы можете вызвать загрузчик через Ip-адрес устройства Synology и назначенный порт, например, http://192.168.21.23:8070 .
{{< gallery match="images/8/*.png" >}}
Для аутентификации возьмите имя пользователя и пароль из MY_ID и MY_PW.
## Шаг 4: Поехали
Теперь в поле "URL" можно вводить урлы видео Youtube и урлы плейлистов, и все видео автоматически попадают в папку загрузки дисковой станции Synology.
{{< gallery match="images/9/*.png" >}}
Папка для скачивания:
{{< gallery match="images/10/*.png" >}}